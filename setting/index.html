<!DOCTYPE html>
<html lang = "ja">
<html>
<head>
<meta charset = "utf8">
<title>Test</title>
<script src="http://code.jquery.com/jquery-3.2.1.min.js"></script>
<style>
    img{
        width: 7%;
　　　　 height: 7%;
        
    }
    div.c1{
        background-color:#616a6a;
    }
    div.c0{
        background-color: #c5ccd3;
    }
    h3{
        color: aqua
    }
    div.wifi{
        font-size: 20px;
    }
</style>
</head>
<body>
    <div id="wifiset">
        <h3>wifi設定</h3>
    </div>
    <div id="settitle">
        <h4>タイトル設定</h4>
        <input type=text>
    </div>
    <button id="settitle">タイトルを設定</button>
    <script>
        $(function(){
            var url="http://192.168.1.78:5000"
            $.ajax({
                type:"get",
                url: url+"/list", 
                dataType:"json",
            }).done(function(data){
                var l = Object.keys(data).length;
                for(let i=0;i<l;i++){
                    var ssid=data[i].SSID;
                    var power=data[i].POWER;
                    $(
                        "<div class='wifi' id='"+String(i)+"'>"+
                        "<div class='c"+String(i%2)+"'>"+
                        "<img src='./img/wifi"+power+".png' class='wifisimg' >" +
                        "<center><p class='ssid'>"+ssid+"</p></center>"+
                        "<hr>"+
                        "</div></div>"
                    ).appendTo("div#wifiset")
                }
            });
            $(document).on("click",".wifi",function(){
                console.log("hoge");
                var id=$(this).attr("id");
                var pass=window.prompt("wifiのpasswordを入力してください");
                if (pass.length !== 0){
                    alert("wifiに接続します");
                    $.ajax({
                        type:"post",
                        url:url+"/connect",
                        dataType:"json",
                        data:{"id":String(id),"pass":pass}
                    })
                }
            });
            $("button#settitle").click(function(){
                var title = $("input").val();
                $.ajax({
                    type:"post",
                    url: url+"/settitle",
                    dataType:"json",
                    data:{"title":title}
                })
                alert("titleを"+title+"に設定しました");
            })
        });
    </script>
</body>
</html>
